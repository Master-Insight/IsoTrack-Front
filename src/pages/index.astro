---
import Layout from "../layouts/Layout.astro";
import LoginForm from "../components/auth/LoginForm";
import HeroSection from "../components/dashboard/HeroSection.astro";
import ProtectedDashboard from "../components/dashboard/ProtectedDashboard.astro";
import { API_URL, DEFAULT_COMPANY, SUPABASE_URL } from "../consts";

const profileEndpoint = `${API_URL}/users/me`;
const logoutEndpoint = `${API_URL}/users/logout`;
const documentsEndpoint = `${API_URL}/documents`;
---

<Layout
  title="IsoTrack · Fase 1.3"
  description="Autenticación obligatoria, bienvenida y listado inicial de documentos"
>
  <div class="space-y-8">
    <HeroSection />
  </div>

  <script type="module">
    import { initDashboard } from "../scripts/dashboardClient";

    initDashboard({
      profileEndpoint,
      logoutEndpoint,
      documentsEndpoint,
    });
  </script>
</Layout>
